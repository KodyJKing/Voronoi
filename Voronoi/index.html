<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
    </head>
    <body>
        <canvas id="myCanvas" width=500 height=500></canvas>
        <script src="voronoi.js"></script>
        <script>
            let canvas = document.getElementById("myCanvas")
            let ctx = canvas.getContext("2d")
            let points = []
            let mouse = {x: 0, y: 0}
            canvas.onmousedown = function(e) {
                let newPoint = new Vector(e.x, e.y)
                points.push(newPoint)
                render()
            }
            canvas.onmousemove = function(e) {
                mouse.x = e.x
                mouse.y = e.y
            }
            //RENDER FUNCTION
            function render() {
                //clear
                ctx.fillStyle = "hsl(236, 100%, 90%)"
                ctx.fillRect(0, 0, canvas.width, canvas.height)
                let a0 = new Vector(100, 100)
                let a1 = new Vector(200, 200)
                drawLine(a0, a1)
                let b0 = new Vector(150, 100)
                // let b1 = new Vector(50, 200)
                let b1 = new Vector(mouse.x, mouse.y)
                drawLine(b0, b1)
                let l0 = new Line(a0, a1)
                let l1 = new Line(b0, b1)
                let ip = l0.intersect(l1)
                if (ip)
                    drawCircle("black", ip)
                setTimeout(() => {
                    render()
                }, 1);
            }
            // render functions
            function drawLine(a, b) {
                ctx.beginPath()
                ctx.moveTo(a.x, a.y)
                ctx.lineTo(b.x, b.y)
                ctx.strokeWidth = 5
                ctx.stroke()
            }
            function drawCircle(color, a) {
                ctx.fillStyle = color
                ctx.beginPath()
                ctx.arc(a.x, a.y, 5, 0, 2 * Math.PI)
                ctx.fill()
            }
            render()
        </script>
    </body>
</html>