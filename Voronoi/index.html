<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
    </head>
    <body>
        <canvas id="myCanvas" width=500 height=500></canvas>
        <script src="voronoi.js"></script>
        <script>
            let canvas = document.getElementById("myCanvas")
            let ctx = canvas.getContext("2d")
            let points = []
            let diagram = null
            let mouse = {x: 0, y: 0}
            canvas.onmousedown = function(e) {
                let newPoint = new Vector(e.x, e.y)
                points.push(newPoint)
                diagram = new VoronoiDiagram(points)
                render()
            }
            canvas.onmousemove = function(e) {
                mouse.x = e.x
                mouse.y = e.y
            }
            //RENDER FUNCTION
            function render() {
                //clear
                ctx.fillStyle = "hsl(236, 100%, 90%)"
                ctx.fillRect(0, 0, canvas.width, canvas.height)
                for (let point of points)
                    drawCircle("black", point)
                if (diagram)
                    for (let line of diagram.lines)
                        drawLine(line.forwardPoint, line.backwardPoint)
            }
            // render functions
            function drawLine(a, b) {
                ctx.beginPath()
                ctx.moveTo(a.x, a.y)
                ctx.lineTo(b.x, b.y)
                ctx.strokeWidth = 5
                ctx.stroke()
            }
            function drawCircle(color, a) {
                ctx.fillStyle = color
                ctx.beginPath()
                ctx.arc(a.x, a.y, 5, 0, 2 * Math.PI)
                ctx.fill()
            }
            render()
        </script>
    </body>
</html>